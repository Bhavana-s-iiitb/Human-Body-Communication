# Human-Body-Communication
## Week 4 
### Demodulation on Receiver PSoC with carrier of Transmitter PSoC
Transmitter PSoC:
Both carrier and message signal are generated by PWM with Fc = 10KHz and Fm = 1KHz.
The carrier signal is multiplied with the message signal using the mixer.
<br>

![image](https://github.com/user-attachments/assets/178644f9-2bed-478f-8dc9-07a96e663a3e)

<br>

```
#include "project.h"

int main(void)
{
    CyGlobalIntEnable; /* Enable global interrupts. */

     //Mixer_1_Start();

    for(;;)
    {
        PWM_1_Start();
        PWM_2_Start();
    }
}
```
##### Mixer Component
PSoC Creator provides a “Mixer” component. It can be used for frequency conversion of an input signal using a local
oscillator (LO) signal as the sampling clock. 
<br>
The Mixer component can be configured in two
configurations:
1. Up Mixer:  Multiplies the input signal with LO.
2. Down Mixer: Operates as a sample and hold circuit on the input signal.

#### Demodulation



### PSoC Implementation of AM Modulation and Demodulation
The message signal and carrier signal are
multiplied by mixer
<br>
The Voltage DAC (VDAC) provides offset to the message signal m(t).
<br>
Modulation index can be defined as the
measure of extent of amplitude variation about a unmodulated carrier. The modulation index is an important factor.
When a level of modulation is too low, the modulation does not utilize the carrier efficiently and if a level of modulation
is too high, the carrier can become over modulated causing sidebands to extend out beyond the allowed bandwidth
causing interference to other users. 
##### Demodulation
![image](https://github.com/user-attachments/assets/a2d95b6f-d763-4f20-966d-aaeeff9fff54)
![image](https://github.com/user-attachments/assets/121c1132-0f3c-4664-b493-1563ec50dae9)

<br>

The AM signal is given to comparator whose reference is AGND. The output of the comparator is square wave with
frequency same as the carrier frequency of AM signal. The output of the comparator is used as a LO signal for the
mixer. The mixer type is set to Down Mixer (or Sample Mixer).The Down Mixer gives a gain close to ‘1’ (when the
signal is sampled at peaks) for the down converted signal. The Down Mixer output has lower harmonic content than
up mixer when the input signal and LO signal have near same frequencies. The Mixer samples the input AM signal at
the rising edges of the LO as shown in following figure.

![image](https://github.com/user-attachments/assets/333da9e0-c562-4847-8686-ce864b89f585)

<br>

The comparator output delay plays
an important role in the demodulation. The ideal delay that gives maximum output is quarter period (90°) of the
carrier. See Figure 18. When the delay is 90°, the mixer samples the AM wave at the peaks. A delay lesser than 90°
still gives a demodulated output; however, the amplitude level is reduced. The comparator typical delay is 90 ns. This
delay makes the mixer sample the AM wave within 45° to 135° from the zero crossing for the frequency range
1.25 MHz to 4 MHz. If the signal frequency is out of this range then, either external delay circuit should be added on
the signal before giving it to ZCD or the signal should be brought within the range before demodulating it.
